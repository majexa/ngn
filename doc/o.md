


##Авторизация##
###Диалог Авторизация/Регистрация###


##Server-Client компоненты##
##tiny и о каждой его кнопочке. кастомизация всего. гармоничный рассказ##
Сегодня я расскажу о настройке [tinymce](http://www.tinymce.com/). Ngn использует его в трех своих компонентах. Это поля `wisiwigSimple`, `wisiwigSimpleLinks`, `wisiwig`. Количество кнопок в тулбарах каждого нарастает соответственно.

###wisiwigSimple###

Вот шапка js-класса этого компонента формы:

    /**
     * @requires Ngn.TinySettings.Simple
     */
    Ngn.Form.El.WisiwigSimple = new Class({
      Extends: Ngn.Form.El.Wisiwig,

      options: {
        tinySettings: null
    },
    ...

`Ngn.TinySettings.Simple`, подключаемый здесь, в свою очередь наследуется от `Ngn.TinySettings`, js код которого создаётся на сервере файлом Ngn/`more/scripts/js/common/ngn.TinySettings.php`.

Теперь погрузимся в дебри tinymce, что бы увидеть реализацию одного из диалогов. В Ngn используется tinymce торой версии. Дизайн её диалогов оставляет желать лучшего. На текущий момент уже существует четвёртая версия этого редактора. Она претерпела значительные изменения. Теперь весь клиентский js код пропускается через nodejs на этапе сборки. Это позволяет использовать инструменты commonjs для компоновки классов.

Так выглядит объявление класса в новом tinymce:

    define("tinymce/EnterKey", [
      "tinymce/dom/TreeWalker",
      "tinymce/dom/RangeUtils",
      "tinymce/Env"
    ], function(TreeWalker, RangeUtils, Env) {
    ...

Текущая же версия вполне удовлетворяет нашим потребностям. Да, у неё нет такого большого набора тестов. Но стабильность её доказало время. Сейчас же мы просто используем её вместе со стандартной темой. Её маленькие иконочки и отстутствие дополнительного выпадающего меню превосходно вписываются в дизайн и концепцию Ngn. Никаких лишних кликов, все нужные кнопки на тулбаре редактора.

###реализация диалога вставки ссылки###
Интеграция tinymce в Ngn подразумевала и замену tinymce-диалогов на Ngn-диалоги. Под диалогами я подразумеваю и визуальное исполнение и API в виде js классов.

##SFLM##
##Языки##



#####DDO HTML#####
#####DDO CSS#####
#####DDO JAVASCRIPT#####






#####dd-записи#####

#####Фильтрация dd-записей#####
Для того, что бы получаемые dd-записи можно было фильтровать напрямую через строку запроса, используйте трейт
DdParamFilterCtrl и реализуйте его абстрактный метод в вашем контроллере
Варианты форматов запроса: TODO

######Пример:######
Контроллер:

    class CtrlThreeDefault {
      use DdParamFilterCtrl;

      protected function _paramFilterItems() {
        return $this->items();
      }
      protected function items() {
        return new DdItems('strName');
      }
      function action_default() {
        $this->d['items'] = $this->items()->getItems();
      }
    }

Шаблон:

    <ul>
    <? foreach ($d['items'] as $v) { ?>
      <li><?= $v['title'] ?></li>
    <? } ?>
    </ul>


##dd##
<i>Dynamic Data</i>

dd - это библиотека, входящая в состав Ngn, которая обеспечивает ф-л по управлению записями базы данных.
Библиотека поддерживает следующие функции:

- Создание структур (таблиц) и полей структур через веб-интерфейс
- Большой набор типов полей
- Подсистема тегов для фильтрации записей с реализованными полями типа single, multi, singleTree, multiTree
- Редактирование записей через веб-интерфейс
- Специальные поля, позволяющие с помощью интерфейса связывать структуры друг с другом

##dd-теги##
dd-теги - это мощный инструмент по объединению записей в группы и связыванию их между собой.





























